# computer network



---

#### 为什么要有三次握手？(gpt4o-2024.8.1)

 过程

三次握手的过程如下：

1. **第一次握手（SYN）：** 客户端向服务器发送一个SYN（同步序列编号）包，表示客户端希望与服务器建立连接。这个包中会包含一个初始序列号（Sequence Number）。

2. **第二次握手（SYN-ACK）：** 服务器收到SYN包后，确认收到，并向客户端发送一个SYN-ACK包，表示同意建立连接。这个包中包含服务器的初始序列号和对客户端SYN包的确认号（Acknowledgment Number），即客户端初始序列号加1。

3. **第三次握手（ACK）：** 客户端收到服务器的SYN-ACK包后，再向服务器发送一个确认包ACK。这个包中包含对服务器SYN包的确认号，即服务器初始序列号加1。此时，连接正式建立，双方可以开始数据传输。
   
   

原因

1. **确保双方准备就绪：** 三次握手可以确保通信的双方都已准备好发送和接收数据。如果没有三次握手，一方可能会认为连接已经建立，但另一方并没有准备好接收数据，这样会导致数据丢失或无法传输。

2. **避免重复数据包：** 网络中可能会有旧的重复数据包存在，这些数据包如果被误认为是新的连接请求，可能会导致连接的错误建立。通过三次握手，能够确认当前连接是新的，而不是由于网络延迟导致的旧数据包。

3. **同步初始序列号：** 在建立连接的过程中，双方需要交换初始序列号，用于后续数据包的排序和确认。三次握手可以保证双方正确地同步初始序列号。
   
   

---

#### 为什么要有四次挥手？(gpt4o-2024.8.1)

步骤

* **第一次挥手**：客户端发送一个FIN（Finish）报文段，表示客户端已经没有数据要发送了，但仍然可以接收数据。这时，客户端进入FIN_WAIT_1状态。

* **第二次挥手**：服务器收到FIN报文段后，发送一个ACK（Acknowledgment）报文段，确认接收到客户端的FIN报文段，并进入CLOSE_WAIT状态。服务器随后准备关闭连接，但还可能有数据需要发送给客户端。

* **第三次挥手**：服务器在完成数据的发送后，发送一个FIN报文段，表示服务器也没有数据要发送了。这时，服务器进入LAST_ACK状态。

* **第四次挥手**：客户端收到服务器的FIN报文段后，发送一个ACK报文段，确认接收到服务器的FIN报文段，客户端进入TIME_WAIT状态，等待足够的时间以确保服务器收到ACK报文段，之后才真正关闭连接。
  
  

原因

1. **数据完整性**：四次挥手确保双方都能够完全发送和接收所有数据。第一次挥手仅表示一方完成了发送数据，但另一方可能还有数据未发送。因此，需要两次挥手来处理各自的关闭过程。

2. **双向关闭**：TCP连接是全双工的，即双方都可以独立发送和接收数据。四次挥手确保了双方都能够完全完成自己的数据传输任务，然后才完全关闭连接。

3. **确保可靠性**：最后的TIME_WAIT状态是为了确保所有的报文段（特别是可能的重传报文段）都已被处理，这样可以防止因为延迟的报文导致连接状态错误。
   
   

---

#### tcp和udp的对比和应用？(gpt4o-2024.8.1)

TCP（传输控制协议）和UDP（用户数据报协议）是两种常用的传输层协议，各有不同的特性和应用场景。

TCP（Transmission Control Protocol）

**特性**:

1. **连接导向**: 在数据传输之前，需要建立一个可靠的连接。
2. **可靠性**: 提供数据传输的可靠性，确保数据包按序到达，并进行错误检查和重传。
3. **流量控制和拥塞控制**: 通过滑动窗口机制进行流量控制，避免网络拥塞。
4. **有序性**: 确保数据包按序到达。

**应用场景**:

1. **Web浏览**: HTTP/HTTPS协议使用TCP，确保网页数据的完整性和可靠性。
2. **文件传输**: FTP（文件传输协议）使用TCP，确保文件数据的完整性。
3. **电子邮件**: SMTP（简单邮件传输协议）、IMAP和POP3协议使用TCP，确保邮件数据的可靠传输。
4. **远程登录**: SSH和Telnet协议使用TCP，确保命令和数据的可靠传输。
   
   

UDP（User Datagram Protocol）

**特性**:

1. **无连接**: 数据包的传输不需要建立连接，发送方和接收方独立工作。
2. **不保证可靠性**: 不保证数据包的到达和顺序，也不进行错误检查和重传。
3. **低延迟**: 由于没有连接建立和确认机制，传输速度快，适合实时应用。
4. **无序性**: 数据包可能乱序到达。

**应用场景**:

1. **实时应用**: 视频流、音频流（如VoIP）使用UDP，允许部分数据丢失而不影响整体质量。
2. **在线游戏**: 游戏数据需要快速传输，UDP减少了延迟，提升游戏体验。
3. **广播和多播**: 像DHCP、SNMP等协议使用UDP，适用于一对多的通信模式。
4. **简单的查询和响应**: 像DNS（域名系统）使用UDP，快速响应查询请求。

总结来说，TCP适用于需要高可靠性和有序传输的应用，而UDP则适用于对速度和实时性要求较高，但对数据完整性要求不高的应用。



---
